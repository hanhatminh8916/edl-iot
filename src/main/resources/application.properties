# Application name
spring.application.name=BFE_forAIOT

# Server configuration - Heroku sẽ tự động set PORT
server.port=${PORT:8080}

# ========================================
# DATABASE CONFIGURATION
# ========================================

# === OPTION 1: H2 In-Memory (DEVELOPMENT - Backup) ===
# Dùng H2 để develop không cần kết nối internet
# spring.datasource.url=jdbc:h2:mem:testdb
# spring.datasource.driver-class-name=org.h2.Driver
# spring.datasource.username=sa
# spring.datasource.password=
# spring.h2.console.enabled=true
# spring.h2.console.path=/h2-console

# === OPTION 2: JawsDB MySQL Cloud (PRODUCTION - Heroku Database) ===
# Connection String: mysql://i299o9m20iz3rx3f:ebxs5nknkrgk349h@tk3mehkfmmrhjg0b.cbetxkdyhwsb.us-east-1.rds.amazonaws.com:3306/bsrxqa8k23608y3y
spring.datasource.url=jdbc:mysql://tk3mehkfmmrhjg0b.cbetxkdyhwsb.us-east-1.rds.amazonaws.com:3306/bsrxqa8k23608y3y?useSSL=true&requireSSL=false&serverTimezone=Asia/Ho_Chi_Minh&allowPublicKeyRetrieval=true&autoReconnect=true
spring.datasource.username=i299o9m20iz3rx3f
spring.datasource.password=ebxs5nknkrgk349h
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Connection Pool Settings
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# JPA/Hibernate
# Chuyển sang 'update' để giữ dữ liệu khi restart (thay vì 'create-drop')
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# Disable SQL script initialization (schema.sql, data.sql)
spring.sql.init.mode=never

# MQTT Configuration (Tạm thời disable - chưa có broker)
# mqtt.broker.url=tcp://localhost:1883
# mqtt.client.id=bfe-backend-${random.value}
# mqtt.topic=smarthelmet/#

# WebSocket
spring.websocket.allowed-origins=*

# ========================================
# FACEBOOK MESSENGER CONFIGURATION
# ========================================
# Lấy từ Facebook Developer Console
facebook.messenger.page-access-token=EAATEoWNyyykBPZBODwZC9ZBoWSTvYWztK42WOeTmpCR4WfqQ16ZC1b5K4LtyKmLmqsRlH8BQEHMEFb8HMT5ZBMqBImZBda3BZA53GDZBfe0nu9zuZC3CkL9iEPLl9npAvDPMWzXS4hKHqNGyZBsp8yDBSVUpYcmGKZAMT7EgjrhtsWflMLnUgym5ZA6ZANgvofmTZB8U0ZAgOAw0fZCNwsrjzq1eq6ucHwZDZD
facebook.messenger.verify-token=BFE_SECURE_VERIFY_TOKEN_2025
facebook.messenger.api-url=https://graph.facebook.com/v18.0/me/messages

# Logging
logging.level.com.hatrustsoft.bfe_foraiot=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG
